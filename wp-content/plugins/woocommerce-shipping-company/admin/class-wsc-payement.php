<?php

/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

require_once( WOOCOMMERCE_SHIPPING_COMPANY_PATH . '/vendor/autoload.php' );

class WSC_Payment {


	public function __construct() {


		add_action( 'wp_ajax_nopriv_process_company_payment', [ $this, 'process_company_payment' ] );
		add_action( 'wp_ajax_process_company_payment', [ $this, 'process_company_payment' ] );

		add_action( 'init', [ $this, 'entity_setup_post_type' ] );


	}

	function entity_setup_post_type() {
		$args = array(
			'public'       => false,
			'label'        => 'Payment History',
			'show_ui'      => true,
			'show_in_menu' => false,
		);
		register_post_type( 'payment_histroy', $args );
	}

	function process_company_payment() {


		$data = [];

		if ( isset( $_REQUEST['function'] ) ) {
			$func = $_REQUEST['function'];


			if ( $func == 'validate_tr' ) {
				$data = $this->validate_transaction();

			}
			if ( $func == 'get_tr' ) {
				$data = $this->get_list_transaction();

			}


			if ( $func == 'upload' ) {
				$data = $this->process_upload_file();
			}


			if ( $func == 'check_payment' ) {

				/*
				 * All this code for debug and check whats the problem
				 * $_REQUEST['data'] = str_replace("\\", "", $_REQUEST['data']);
				$this->write_log($_REQUEST['data']);
				$data = "[[120103028520,\"62,000\",\"\",\"\",\"\",\"\"],[120103060368,\"41,000\",\"\",\"\",\"\",\"\"],[120103060997,\"26,000\",\"\",\"\",\"\",\"\"],[120103082892,\"22,900\",\"\",\"\",\"\",\"\"],[120103152313,\"32,000\",\"\",\"\",\"\",\"\"],[120103170744,\"82,000\",\"\",\"\",\"\",\"\"],[120103181722,\"62,000\",\"\",\"\",\"\",\"\"],[120103181810,\"62,000\",\"\",\"\",\"\",\"\"],[120103186444,\"38,800\",\"\",\"\",\"\",\"\"],[120103186684,\"23,000\",\"\",\"\",\"\",\"\"],[120103186833,\"20,000\",\"\",\"\",\"\",\"\"],[120103189672,\"66,900\",\"\",\"\",\"\",\"\"],[120103191473,\"59,900\",\"\",\"\",\"\",\"\"],[120103199031,\"46,000\",\"\",\"\",\"\",\"\"],[120103201150,\"26,900\",\"\",\"\",\"\",\"\"],[120103224133,\"66,900\",\"\",\"\",\"\",\"\"],[120103235865,\"214,000\",\"\",\"\",\"\",\"\"],[120103244687,\"56,000\",\"\",\"\",\"\",\"\"],[120103247462,\"66,000\",\"\",\"\",\"\",\"\"],[120103264326,\"66,000\",\"\",\"\",\"\",\"\"],[120103297157,\"22,000\",\"\",\"\",\"\",\"\"],[120103301982,\"37,000\",\"\",\"\",\"\",\"\"],[120103308268,\"66,000\",\"\",\"\",\"\",\"\"],[120103310184,\"62,000\",\"\",\"\",\"\",\"\"],[120103326884,\"51,000\",\"\",\"\",\"\",\"\"],[120103335448,\"62,000\",\"\",\"\",\"\",\"\"],[120103336854,\"106,000\",\"\",\"\",\"\",\"\"],[120103339444,\"62,000\",\"\",\"\",\"\",\"\"],[120103372193,\"117,000\",\"\",\"\",\"\",\"\"],[120103374739,\"42,000\",\"\",\"\",\"\",\"\"],[120103427998,\"22,900\",\"\",\"\",\"\",\"\"],[120103444621,\"31,000\",\"\",\"\",\"\",\"\"],[120103451029,\"106,000\",\"\",\"\",\"\",\"\"],[120103461150,\"26,900\",\"\",\"\",\"\",\"\"],[120103479177,\"76,900\",\"\",\"\",\"\",\"\"],[120103497863,\"51,000\",\"\",\"\",\"\",\"\"],[120103512959,\"66,000\",\"\",\"\",\"\",\"\"],[120103514027,\"162,000\",\"\",\"\",\"\",\"\"],[120103520329,\"65,000\",\"\",\"\",\"\",\"\"],[120103521850,\"82,000\",\"\",\"\",\"\",\"\"],[120103525290,\"123,000\",\"\",\"\",\"\",\"\"],[120103542172,\"32,000\",\"\",\"\",\"\",\"\"],[120103548051,\"31,000\",\"\",\"\",\"\",\"\"],[120103549290,\"26,900\",\"\",\"\",\"\",\"\"],[120103559950,\"46,900\",\"\",\"\",\"\",\"\"],[120103588563,\"57,000\",\"\",\"\",\"\",\"\"],[120103597109,\"92,900\",\"\",\"\",\"\",\"\"],[120103599374,\"42,000\",\"\",\"\",\"\",\"\"],[120103601341,\"62,000\",\"\",\"\",\"\",\"\"],[120103605514,\"22,000\",\"\",\"\",\"\",\"\"],[120103612091,\"66,000\",\"\",\"\",\"\",\"\"],[120103638363,\"26,000\",\"\",\"\",\"\",\"\"],[120103649378,\"72,000\",\"\",\"\",\"\",\"\"],[120103655856,\"20,000\",\"\",\"\",\"\",\"\"],[120103672853,\"56,000\",\"\",\"\",\"\",\"\"],[120103673427,\"62,000\",\"\",\"\",\"\",\"\"],[120103702826,\"86,000\",\"\",\"\",\"\",\"\"],[120103705601,\"31,000\",\"\",\"\",\"\",\"\"],[120103706628,\"66,900\",\"\",\"\",\"\",\"\"],[120103729081,\"22,000\",\"\",\"\",\"\",\"\"],[120103729559,\"36,000\",\"\",\"\",\"\",\"\"],[120103751682,\"22,900\",\"\",\"\",\"\",\"\"],[120103754306,\"7,000\",\"\",\"\",\"\",\"\"],[120103765870,\"30,000\",\"\",\"\",\"\",\"\"],[120103769113,\"32,000\",\"\",\"\",\"\",\"\"],[120103769520,\"61,000\",\"\",\"\",\"\",\"\"],[120103770757,\"46,000\",\"\",\"\",\"\",\"\"],[120103775354,\"36,000\",\"\",\"\",\"\",\"\"],[120103780824,\"194,000\",\"\",\"\",\"\",\"\"],[120103790177,\"73,000\",\"\",\"\",\"\",\"\"],[120103790849,\"116,000\",\"\",\"\",\"\",\"\"],[120103813520,\"24,000\",\"\",\"\",\"\",\"\"],[120103826694,\"62,000\",\"\",\"\",\"\",\"\"],[120103899991,\"145,000\",\"\",\"\",\"\",\"\"],[120103902170,\"76,900\",\"\",\"\",\"\",\"\"],[120103904239,\"46,900\",\"\",\"\",\"\",\"\"],[120103918551,\"62,000\",\"\",\"\",\"\",\"\"],[120103927674,\"22,000\",\"\",\"\",\"\",\"\"],[120103928497,\"106,000\",\"\",\"\",\"\",\"\"],[120103950487,\"62,000\",\"\",\"\",\"\",\"\"],[120103963232,\"106,000\",\"\",\"\",\"\",\"\"],[120103963241,\"36,000\",\"\",\"\",\"\",\"\"],[120103971523,\"145,000\",\"\",\"\",\"\",\"\"],[120103985076,\"62,000\",\"\",\"\",\"\",\"\"],[120103992997,\"36,000\",\"\",\"\",\"\",\"\"],[120203071990,\"145,000\",\"\",\"\",\"\",\"\"],[120203206231,\"30,000\",\"\",\"\",\"\",\"\"],[120203249467,\"22,900\",\"\",\"\",\"\",\"\"],[120203262185,\"22,000\",\"\",\"\",\"\",\"\"],[120203266835,\"46,000\",\"\",\"\",\"\",\"\"],[120203269717,\"176,000\",\"\",\"\",\"\",\"\"],[120203277673,\"41,000\",\"\",\"\",\"\",\"\"],[120203334394,\"39,900\",\"\",\"\",\"\",\"\"],[120203442921,\"66,900\",\"\",\"\",\"\",\"\"],[120203464899,\"29,000\",\"\",\"\",\"\",\"\"],[120203525288,\"66,900\",\"\",\"\",\"\",\"\"],[120203592101,\"26,000\",\"\",\"\",\"\",\"\"],[120203597595,\"22,900\",\"\",\"\",\"\",\"\"],[120203656621,\"22,900\",\"\",\"\",\"\",\"\"],[120203680372,\"32,000\",\"\",\"\",\"\",\"\"],[120203689869,\"72,000\",\"\",\"\",\"\",\"\"],[120203704803,\"42,000\",\"\",\"\",\"\",\"\"],[120203781839,\"66,900\",\"\",\"\",\"\",\"\"],[120203813873,\"31,000\",\"\",\"\",\"\",\"\"],[120203840284,\"46,900\",\"\",\"\",\"\",\"\"],[120203966087,\"32,000\",\"\",\"\",\"\",\"\"],[120203973980,\"202,000\",\"\",\"\",\"\",\"\"],[120303050037,\"62,000\",\"\",\"\",\"\",\"\"],[120303067310,\"111,900\",\"\",\"\",\"\",\"\"],[120303078060,\"26,900\",\"\",\"\",\"\",\"\"],[120303079874,\"66,900\",\"\",\"\",\"\",\"\"],[120303095261,\"52,000\",\"\",\"\",\"\",\"\"],[120303108264,\"62,000\",\"\",\"\",\"\",\"\"],[120303116236,\"46,900\",\"\",\"\",\"\",\"\"],[120303117952,\"22,900\",\"\",\"\",\"\",\"\"],[120303154014,\"22,900\",\"\",\"\",\"\",\"\"],[120303180505,\"155,900\",\"\",\"\",\"\",\"\"],[120303184884,\"22,900\",\"\",\"\",\"\",\"\"],[120303189296,\"116,000\",\"\",\"\",\"\",\"\"],[120303196038,\"105,000\",\"\",\"\",\"\",\"\"],[120303208005,\"55,000\",\"\",\"\",\"\",\"\"],[120303222528,\"31,000\",\"\",\"\",\"\",\"\"],[120303241851,\"107,000\",\"\",\"\",\"\",\"\"],[120303247554,\"26,800\",\"\",\"\",\"\",\"\"],[120303263066,\"66,000\",\"\",\"\",\"\",\"\"],[120303291537,\"62,000\",\"\",\"\",\"\",\"\"],[120303303984,\"51,000\",\"\",\"\",\"\",\"\"],[120303305469,\"36,000\",\"\",\"\",\"\",\"\"],[120303313990,\"46,900\",\"\",\"\",\"\",\"\"],[120303318418,\"31,000\",\"\",\"\",\"\",\"\"],[120303372656,\"46,900\",\"\",\"\",\"\",\"\"],[120303385331,\"66,000\",\"\",\"\",\"\",\"\"],[120303390962,\"66,000\",\"\",\"\",\"\",\"\"],[120303391086,\"56,000\",\"\",\"\",\"\",\"\"],[120303392687,\"30,000\",\"\",\"\",\"\",\"\"],[120303397169,\"81,000\",\"\",\"\",\"\",\"\"],[120303405608,\"62,000\",\"\",\"\",\"\",\"\"],[120303418620,\"30,000\",\"\",\"\",\"\",\"\"],[120303437944,\"30,000\",\"\",\"\",\"\",\"\"],[120303458716,\"72,000\",\"\",\"\",\"\",\"\"],[120303467990,\"30,000\",\"\",\"\",\"\",\"\"],[120303487204,\"46,000\",\"\",\"\",\"\",\"\"],[120303510034,\"62,000\",\"\",\"\",\"\",\"\"],[120303510441,\"42,000\",\"\",\"\",\"\",\"\"],[120303522774,\"24,000\",\"\",\"\",\"\",\"\"],[120303535802,\"96,000\",\"\",\"\",\"\",\"\"],[120303541645,\"42,000\",\"\",\"\",\"\",\"\"],[120303575466,\"22,900\",\"\",\"\",\"\",\"\"],[120303591464,\"30,000\",\"\",\"\",\"\",\"\"],[120303612253,\"106,000\",\"\",\"\",\"\",\"\"],[120303663187,\"76,900\",\"\",\"\",\"\",\"\"],[120303684056,\"29,000\",\"\",\"\",\"\",\"\"],[120303718210,\"131,000\",\"\",\"\",\"\",\"\"],[120303730443,\"66,900\",\"\",\"\",\"\",\"\"],[120303734388,\"46,900\",\"\",\"\",\"\",\"\"],[120303734865,\"20,000\",\"\",\"\",\"\",\"\"],[120303749797,\"46,900\",\"\",\"\",\"\",\"\"],[120303762910,\"106,000\",\"\",\"\",\"\",\"\"],[120303774872,\"116,000\",\"\",\"\",\"\",\"\"],[120303806171,\"26,000\",\"\",\"\",\"\",\"\"],[120303817122,\"46,900\",\"\",\"\",\"\",\"\"],[120303826157,\"36,000\",\"\",\"\",\"\",\"\"],[120303826908,\"46,900\",\"\",\"\",\"\",\"\"],[120303836677,\"26,000\",\"\",\"\",\"\",\"\"],[120303844904,\"86,000\",\"\",\"\",\"\",\"\"],[120303847789,\"32,000\",\"\",\"\",\"\",\"\"],[120303864102,\"82,000\",\"\",\"\",\"\",\"\"],[120303866599,\"73,000\",\"\",\"\",\"\",\"\"],[120303868199,\"51,000\",\"\",\"\",\"\",\"\"],[120303873517,\"36,000\",\"\",\"\",\"\",\"\"],[120303940563,\"46,000\",\"\",\"\",\"\",\"\"],[120303972386,\"62,000\",\"\",\"\",\"\",\"\"],[120303975453,\"62,000\",\"\",\"\",\"\",\"\"],[120303992168,\"46,900\",\"\",\"\",\"\",\"\"],[120303998047,\"66,000\",\"\",\"\",\"\",\"\"],[120303998870,\"62,000\",\"\",\"\",\"\",\"\"],[120403006343,\"32,000\",\"\",\"\",\"\",\"\"],[120403015208,\"46,000\",\"\",\"\",\"\",\"\"],[120403015271,\"60,000\",\"\",\"\",\"\",\"\"],[120403033675,\"22,900\",\"\",\"\",\"\",\"\"],[120403137111,\"32,000\",\"\",\"\",\"\",\"\"],[120403189336,\"62,000\",\"\",\"\",\"\",\"\"],[120403204857,\"66,900\",\"\",\"\",\"\",\"\"],[120403232285,\"145,000\",\"\",\"\",\"\",\"\"],[120403241797,\"22,000\",\"\",\"\",\"\",\"\"],[120403268554,\"41,000\",\"\",\"\",\"\",\"\"],[120403284914,\"46,000\",\"\",\"\",\"\",\"\"],[120403297477,\"145,000\",\"\",\"\",\"\",\"\"],[120403304281,\"46,900\",\"\",\"\",\"\",\"\"],[120403359120,\"52,000\",\"\",\"\",\"\",\"\"],[120403361532,\"56,000\",\"\",\"\",\"\",\"\"],[120403362267,\"23,000\",\"\",\"\",\"\",\"\"],[120403363789,\"62,000\",\"\",\"\",\"\",\"\"],[120403394831,\"21,000\",\"\",\"\",\"\",\"\"],[120403400178,\"36,000\",\"\",\"\",\"\",\"\"],[120403424576,\"62,000\",\"\",\"\",\"\",\"\"],[120403487007,\"32,000\",\"\",\"\",\"\",\"\"],[120403498289,\"62,000\",\"\",\"\",\"\",\"\"],[120403510475,\"225,900\",\"\",\"\",\"\",\"\"],[120403510998,\"106,000\",\"\",\"\",\"\",\"\"],[120403524627,\"156,000\",\"\",\"\",\"\",\"\"],[120403532200,\"22,900\",\"\",\"\",\"\",\"\"],[120403533102,\"32,000\",\"\",\"\",\"\",\"\"],[120403559298,\"26,900\",\"\",\"\",\"\",\"\"],[120403569666,\"46,900\",\"\",\"\",\"\",\"\"],[120403581075,\"22,900\",\"\",\"\",\"\",\"\"],[120403634298,\"62,000\",\"\",\"\",\"\",\"\"],[120403695156,\"46,000\",\"\",\"\",\"\",\"\"],[120403699718,\"106,000\",\"\",\"\",\"\",\"\"],[120403700485,\"62,000\",\"\",\"\",\"\",\"\"],[120403707868,\"123,000\",\"\",\"\",\"\",\"\"],[120403726401,\"66,900\",\"\",\"\",\"\",\"\"],[120403758941,\"26,000\",\"\",\"\",\"\",\"\"],[120403794712,\"62,000\",\"\",\"\",\"\",\"\"],[120403834986,\"56,000\",\"\",\"\",\"\",\"\"],[120403841427,\"66,900\",\"\",\"\",\"\",\"\"],[120403845247,\"62,000\",\"\",\"\",\"\",\"\"],[120403858180,\"62,000\",\"\",\"\",\"\",\"\"],[120403877273,\"72,000\",\"\",\"\",\"\",\"\"],[120403882257,\"62,000\",\"\",\"\",\"\",\"\"],[120403886305,\"26,000\",\"\",\"\",\"\",\"\"],[120403896719,\"64,000\",\"\",\"\",\"\",\"\"],[120403916378,\"62,000\",\"\",\"\",\"\",\"\"],[120403940737,\"66,000\",\"\",\"\",\"\",\"\"],[120403944238,\"66,900\",\"\",\"\",\"\",\"\"],[120403983884,\"106,000\",\"\",\"\",\"\",\"\"],[120503008773,\"62,000\",\"\",\"\",\"\",\"\"],[120503050837,\"117,000\",\"\",\"\",\"\",\"\"],[120503071371,\"47,000\",\"\",\"\",\"\",\"\"],[120503109629,\"46,900\",\"\",\"\",\"\",\"\"],[120503217256,\"62,000\",\"\",\"\",\"\",\"\"],[120503247008,\"66,900\",\"\",\"\",\"\",\"\"],[120503272855,\"26,000\",\"\",\"\",\"\",\"\"],[120503331024,\"66,900\",\"\",\"\",\"\",\"\"],[120503488720,\"96,900\",\"\",\"\",\"\",\"\"],[120503493980,\"62,000\",\"\",\"\",\"\",\"\"],[120503533288,\"54,700\",\"\",\"\",\"\",\"\"],[120503616615,\"32,000\",\"\",\"\",\"\",\"\"],[120503707421,\"62,000\",\"\",\"\",\"\",\"\"],[120503727179,\"86,000\",\"\",\"\",\"\",\"\"],[120503728752,\"62,000\",\"\",\"\",\"\",\"\"],[120503937420,\"22,900\",\"\",\"\",\"\",\"\"],[120603006745,\"62,000\",\"\",\"\",\"\",\"\"],[120603012366,\"51,000\",\"\",\"\",\"\",\"\"],[120603206196,\"62,000\",\"\",\"\",\"\",\"\"],[120603206549,\"62,000\",\"\",\"\",\"\",\"\"],[120603212540,\"22,900\",\"\",\"\",\"\",\"\"],[120603226783,\"26,000\",\"\",\"\",\"\",\"\"],[120603274948,\"106,000\",\"\",\"\",\"\",\"\"],[120603339403,\"62,000\",\"\",\"\",\"\",\"\"],[120603341727,\"66,900\",\"\",\"\",\"\",\"\"],[120603345574,\"150,900\",\"\",\"\",\"\",\"\"],[120603366869,\"106,000\",\"\",\"\",\"\",\"\"],[120603382061,\"106,000\",\"\",\"\",\"\",\"\"],[120603466886,\"22,900\",\"\",\"\",\"\",\"\"],[120603473354,\"66,900\",\"\",\"\",\"\",\"\"],[120603483388,\"62,000\",\"\",\"\",\"\",\"\"],[120603555490,\"62,000\",\"\",\"\",\"\",\"\"],[120603582449,\"51,000\",\"\",\"\",\"\",\"\"],[120603601799,\"26,000\",\"\",\"\",\"\",\"\"],[120603702177,\"62,000\",\"\",\"\",\"\",\"\"],[120603787576,\"51,000\",\"\",\"\",\"\",\"\"],[120603846019,\"42,000\",\"\",\"\",\"\",\"\"],[120603861595,\"66,900\",\"\",\"\",\"\",\"\"],[120603974659,\"66,000\",\"\",\"\",\"\",\"\"],[120703111983,\"35,000\",\"\",\"\",\"\",\"\"],[120703129098,\"66,900\",\"\",\"\",\"\",\"\"],[120703150496,\"47,000\",\"\",\"\",\"\",\"\"],[120703214262,\"62,000\",\"\",\"\",\"\",\"\"],[120703219638,\"66,900\",\"\",\"\",\"\",\"\"],[120703229811,\"46,900\",\"\",\"\",\"\",\"\"],[120703265628,\"66,900\",\"\",\"\",\"\",\"\"],[120703271249,\"145,000\",\"\",\"\",\"\",\"\"],[120703305573,\"62,000\",\"\",\"\",\"\",\"\"],[120703323843,\"21,000\",\"\",\"\",\"\",\"\"],[120703342051,\"62,000\",\"\",\"\",\"\",\"\"],[120703399837,\"20,000\",\"\",\"\",\"\",\"\"],[120703572722,\"62,000\",\"\",\"\",\"\",\"\"],[120703671290,\"66,900\",\"\",\"\",\"\",\"\"],[120703687219,\"76,900\",\"\",\"\",\"\",\"\"],[120703695704,\"22,900\",\"\",\"\",\"\",\"\"],[120703734632,\"62,000\",\"\",\"\",\"\",\"\"],[120703755866,\"106,000\",\"\",\"\",\"\",\"\"],[120703790425,\"26,000\",\"\",\"\",\"\",\"\"],[120703864447,\"66,900\",\"\",\"\",\"\",\"\"],[120703903773,\"66,000\",\"\",\"\",\"\",\"\"],[120803049540,\"22,900\",\"\",\"\",\"\",\"\"],[120803067944,\"62,000\",\"\",\"\",\"\",\"\"],[120803102034,\"41,000\",\"\",\"\",\"\",\"\"],[120803121950,\"75,000\",\"\",\"\",\"\",\"\"],[120803211961,\"126,800\",\"\",\"\",\"\",\"\"],[120803260204,\"46,900\",\"\",\"\",\"\",\"\"],[120803283108,\"66,900\",\"\",\"\",\"\",\"\"],[120803287830,\"66,900\",\"\",\"\",\"\",\"\"],[120803292416,\"73,000\",\"\",\"\",\"\",\"\"],[120803320153,\"66,900\",\"\",\"\",\"\",\"\"],[120803391966,\"22,000\",\"\",\"\",\"\",\"\"],[120803415877,\"20,000\",\"\",\"\",\"\",\"\"],[120803417112,\"22,900\",\"\",\"\",\"\",\"\"],[120803475550,\"25,000\",\"\",\"\",\"\",\"\"],[120803571021,\"72,000\",\"\",\"\",\"\",\"\"],[120803580913,\"52,000\",\"\",\"\",\"\",\"\"],[120803651521,\"62,000\",\"\",\"\",\"\",\"\"],[120803668017,\"22,000\",\"\",\"\",\"\",\"\"],[120803736831,\"62,000\",\"\",\"\",\"\",\"\"],[120803744186,\"22,900\",\"\",\"\",\"\",\"\"],[120803750017,\"32,000\",\"\",\"\",\"\",\"\"],[120803784546,\"51,000\",\"\",\"\",\"\",\"\"],[120803792439,\"62,000\",\"\",\"\",\"\",\"\"],[120803877022,\"62,000\",\"\",\"\",\"\",\"\"],[120803907819,\"20,000\",\"\",\"\",\"\",\"\"],[120803965637,\"57,900\",\"\",\"\",\"\",\"\"],[120803995665,\"62,000\",\"\",\"\",\"\",\"\"],[120903027615,\"82,000\",\"\",\"\",\"\",\"\"],[120903053489,\"75,000\",\"\",\"\",\"\",\"\"],[120903076499,\"31,000\",\"\",\"\",\"\",\"\"],[120903084762,\"62,000\",\"\",\"\",\"\",\"\"],[120903184576,\"22,900\",\"\",\"\",\"\",\"\"],[120903188439,\"52,000\",\"\",\"\",\"\",\"\"],[120903211445,\"22,000\",\"\",\"\",\"\",\"\"],[120903340242,\"31,000\",\"\",\"\",\"\",\"\"],[120903365542,\"46,000\",\"\",\"\",\"\",\"\"],[120903376876,\"46,000\",\"\",\"\",\"\",\"\"],[120903397967,\"62,000\",\"\",\"\",\"\",\"\"],[120903421389,\"26,900\",\"\",\"\",\"\",\"\"],[120903423624,\"62,000\",\"\",\"\",\"\",\"\"],[120903468469,\"62,000\",\"\",\"\",\"\",\"\"],[120903479650,\"126,800\",\"\",\"\",\"\",\"\"],[120903502806,\"76,000\",\"\",\"\",\"\",\"\"],[120903526055,\"25,000\",\"\",\"\",\"\",\"\"],[120903591378,\"46,000\",\"\",\"\",\"\",\"\"],[120903637838,\"66,900\",\"\",\"\",\"\",\"\"],[120903662029,\"82,000\",\"\",\"\",\"\",\"\"],[120903723384,\"62,000\",\"\",\"\",\"\",\"\"],[120903754506,\"32,000\",\"\",\"\",\"\",\"\"],[120903918168,\"156,000\",\"\",\"\",\"\",\"\"],[120903954452,\"86,800\",\"\",\"\",\"\",\"\"],[120903973253,\"26,900\",\"\",\"\",\"\",\"\"],[120903974438,\"32,000\",\"\",\"\",\"\",\"\"],[120903999446,\"62,000\",\"\",\"\",\"\",\"\"],[121003058198,\"62,000\",\"\",\"\",\"\",\"\"],[121003171569,\"51,000\",\"\",\"\",\"\",\"\"],[121003244120,\"30,000\",\"\",\"\",\"\",\"\"],[121003819100,\"62,000\",\"\",\"\",\"\",\"\"],[121003870332,\"65,000\",\"\",\"\",\"\",\"\"],[121103158477,\"62,000\",\"\",\"\",\"\",\"\"],[121103239523,\"22,900\",\"\",\"\",\"\",\"\"],[121103292355,\"62,000\",\"\",\"\",\"\",\"\"],[121103355575,\"66,900\",\"\",\"\",\"\",\"\"],[121103370608,\"22,900\",\"\",\"\",\"\",\"\"],[121103390426,\"26,000\",\"\",\"\",\"\",\"\"],[121103442349,\"72,000\",\"\",\"\",\"\",\"\"],[121103468231,\"46,900\",\"\",\"\",\"\",\"\"],[121103513009,\"62,000\",\"\",\"\",\"\",\"\"],[121103555917,\"42,000\",\"\",\"\",\"\",\"\"],[121103621034,\"26,000\",\"\",\"\",\"\",\"\"],[121103864453,\"41,000\",\"\",\"\",\"\",\"\"],[121103958929,\"22,000\",\"\",\"\",\"\",\"\"],[121203004553,\"86,000\",\"\",\"\",\"\",\"\"],[121203062733,\"46,000\",\"\",\"\",\"\",\"\"],[121203079469,\"62,000\",\"\",\"\",\"\",\"\"],[121203086487,\"22,900\",\"\",\"\",\"\",\"\"],[121203090718,\"62,000\",\"\",\"\",\"\",\"\"],[121203099728,\"30,000\",\"\",\"\",\"\",\"\"],[121203105737,\"71,900\",\"\",\"\",\"\",\"\"],[121203120082,\"62,000\",\"\",\"\",\"\",\"\"],[121203244504,\"32,000\",\"\",\"\",\"\",\"\"],[121203304806,\"26,000\",\"\",\"\",\"\",\"\"],[121203328718,\"62,000\",\"\",\"\",\"\",\"\"],[121203331101,\"117,000\",\"\",\"\",\"\",\"\"],[121203445945,\"96,000\",\"\",\"\",\"\",\"\"],[121203502505,\"26,900\",\"\",\"\",\"\",\"\"],[121203563719,\"31,000\",\"\",\"\",\"\",\"\"],[121203588994,\"191,000\",\"\",\"\",\"\",\"\"],[121203595134,\"189,000\",\"\",\"\",\"\",\"\"],[121203651209,\"30,000\",\"\",\"\",\"\",\"\"],[121203683697,\"66,900\",\"\",\"\",\"\",\"\"],[121203812174,\"62,000\",\"\",\"\",\"\",\"\"],[121203819566,\"62,000\",\"\",\"\",\"\",\"\"],[121203905049,\"46,900\",\"\",\"\",\"\",\"\"],[121203958740,\"162,000\",\"\",\"\",\"\",\"\"],[121203967942,\"62,000\",\"\",\"\",\"\",\"\"],[121303054999,\"42,000\",\"\",\"\",\"\",\"\"],[121303057570,\"126,800\",\"\",\"\",\"\",\"\"],[121303259406,\"45,000\",\"\",\"\",\"\",\"\"],[121303283810,\"73,000\",\"\",\"\",\"\",\"\"],[121303286048,\"10,000\",\"\",\"\",\"\",\"\"],[121303314615,\"62,000\",\"\",\"\",\"\",\"\"],[121303362782,\"26,900\",\"\",\"\",\"\",\"\"],[121303366520,\"62,000\",\"\",\"\",\"\",\"\"],[121303404644,\"62,000\",\"\",\"\",\"\",\"\"],[121303419026,\"62,000\",\"\",\"\",\"\",\"\"],[121303453923,\"62,000\",\"\",\"\",\"\",\"\"],[121303511661,\"154,000\",\"\",\"\",\"\",\"\"],[121303560029,\"32,000\",\"\",\"\",\"\",\"\"],[121303566847,\"52,000\",\"\",\"\",\"\",\"\"],[121303586407,\"420,700\",\"\",\"\",\"\",\"\"],[121303590446,\"26,000\",\"\",\"\",\"\",\"\"],[121303617655,\"32,000\",\"\",\"\",\"\",\"\"],[121303635156,\"26,000\",\"\",\"\",\"\",\"\"],[121303655239,\"66,900\",\"\",\"\",\"\",\"\"],[121303713719,\"26,000\",\"\",\"\",\"\",\"\"],[121303721383,\"62,000\",\"\",\"\",\"\",\"\"],[121303737755,\"82,000\",\"\",\"\",\"\",\"\"],[121303741590,\"123,000\",\"\",\"\",\"\",\"\"],[121303768676,\"46,000\",\"\",\"\",\"\",\"\"],[121303859996,\"29,000\",\"\",\"\",\"\",\"\"],[121303927835,\"41,000\",\"\",\"\",\"\",\"\"],[121303965783,\"32,000\",\"\",\"\",\"\",\"\"],[121403015580,\"136,000\",\"\",\"\",\"\",\"\"],[121403022270,\"62,000\",\"\",\"\",\"\",\"\"],[121403053526,\"26,000\",\"\",\"\",\"\",\"\"],[121403058345,\"51,000\",\"\",\"\",\"\",\"\"],[121403092011,\"76,000\",\"\",\"\",\"\",\"\"],[121403094170,\"117,000\",\"\",\"\",\"\",\"\"],[121403107483,\"62,000\",\"\",\"\",\"\",\"\"],[121403115613,\"62,000\",\"\",\"\",\"\",\"\"],[121403127317,\"46,900\",\"\",\"\",\"\",\"\"],[121403133257,\"22,000\",\"\",\"\",\"\",\"\"],[121403138836,\"51,000\",\"\",\"\",\"\",\"\"],[121403150777,\"36,000\",\"\",\"\",\"\",\"\"],[121403174874,\"26,000\",\"\",\"\",\"\",\"\"],[121403201789,\"51,000\",\"\",\"\",\"\",\"\"],[121403230693,\"22,000\",\"\",\"\",\"\",\"\"],[121403273342,\"117,000\",\"\",\"\",\"\",\"\"],[121403273652,\"66,900\",\"\",\"\",\"\",\"\"],[121403277533,\"62,000\",\"\",\"\",\"\",\"\"],[121403335563,\"26,000\",\"\",\"\",\"\",\"\"],[121403341704,\"46,900\",\"\",\"\",\"\",\"\"],[121403386123,\"36,700\",\"\",\"\",\"\",\"\"],[121403428058,\"29,000\",\"\",\"\",\"\",\"\"],[121403436437,\"66,900\",\"\",\"\",\"\",\"\"],[121403466748,\"72,000\",\"\",\"\",\"\",\"\"],[121403481880,\"62,000\",\"\",\"\",\"\",\"\"],[121403530733,\"29,000\",\"\",\"\",\"\",\"\"],[121403540323,\"55,000\",\"\",\"\",\"\",\"\"],[121403619942,\"125,000\",\"\",\"\",\"\",\"\"],[121403621275,\"62,000\",\"\",\"\",\"\",\"\"],[121403621619,\"29,000\",\"\",\"\",\"\",\"\"],[121403694095,\"66,000\",\"\",\"\",\"\",\"\"],[121403709926,\"156,000\",\"\",\"\",\"\",\"\"],[121403752715,\"31,000\",\"\",\"\",\"\",\"\"],[121403754023,\"46,900\",\"\",\"\",\"\",\"\"],[121403795987,\"22,900\",\"\",\"\",\"\",\"\"],[121403798276,\"62,000\",\"\",\"\",\"\",\"\"],[121403814006,\"126,800\",\"\",\"\",\"\",\"\"],[121403844399,\"66,000\",\"\",\"\",\"\",\"\"],[121403853388,\"86,000\",\"\",\"\",\"\",\"\"],[121403857001,\"101,000\",\"\",\"\",\"\",\"\"],[121403857852,\"22,900\",\"\",\"\",\"\",\"\"],[121403878271,\"64,000\",\"\",\"\",\"\",\"\"],[121403883699,\"46,900\",\"\",\"\",\"\",\"\"],[121403908828,\"76,800\",\"\",\"\",\"\",\"\"],[121403917978,\"29,000\",\"\",\"\",\"\",\"\"],[121403957994,\"32,000\",\"\",\"\",\"\",\"\"],[121403962048,\"29,000\",\"\",\"\",\"\",\"\"],[121403982291,\"73,000\",\"\",\"\",\"\",\"\"],[121503055965,\"156,000\",\"\",\"\",\"\",\"\"],[121503059785,\"62,000\",\"\",\"\",\"\",\"\"],[121503065573,\"224,900\",\"\",\"\",\"\",\"\"],[121503072768,\"46,900\",\"\",\"\",\"\",\"\"],[121503101574,\"26,900\",\"\",\"\",\"\",\"\"],[121503161239,\"32,000\",\"\",\"\",\"\",\"\"],[121503165411,\"85,000\",\"\",\"\",\"\",\"\"],[121503166368,\"51,000\",\"\",\"\",\"\",\"\"],[121503169693,\"159,000\",\"\",\"\",\"\",\"\"],[121503253284,\"106,000\",\"\",\"\",\"\",\"\"],[121503254663,\"62,000\",\"\",\"\",\"\",\"\"],[121503264280,\"30,000\",\"\",\"\",\"\",\"\"],[121503266321,\"22,000\",\"\",\"\",\"\",\"\"],[121503288828,\"38,800\",\"\",\"\",\"\",\"\"],[121503300810,\"46,900\",\"\",\"\",\"\",\"\"],[121503317449,\"62,000\",\"\",\"\",\"\",\"\"],[121503332721,\"62,000\",\"\",\"\",\"\",\"\"],[121503345646,\"22,900\",\"\",\"\",\"\",\"\"],[121503418289,\"56,000\",\"\",\"\",\"\",\"\"],[121503418429,\"46,900\",\"\",\"\",\"\",\"\"],[121503428851,\"46,900\",\"\",\"\",\"\",\"\"],[121503499220,\"46,000\",\"\",\"\",\"\",\"\"],[121503521404,\"66,000\",\"\",\"\",\"\",\"\"],[121503529619,\"22,000\",\"\",\"\",\"\",\"\"],[121503530174,\"75,900\",\"\",\"\",\"\",\"\"],[121503531906,\"31,000\",\"\",\"\",\"\",\"\"],[121503549604,\"29,000\",\"\",\"\",\"\",\"\"],[121503605900,\"121,900\",\"\",\"\",\"\",\"\"],[121503624622,\"70,900\",\"\",\"\",\"\",\"\"],[121503636867,\"22,000\",\"\",\"\",\"\",\"\"],[121503685614,\"145,000\",\"\",\"\",\"\",\"\"],[121503697354,\"95,000\",\"\",\"\",\"\",\"\"],[121503709330,\"62,000\",\"\",\"\",\"\",\"\"],[121503722872,\"56,000\",\"\",\"\",\"\",\"\"],[121503775740,\"106,000\",\"\",\"\",\"\",\"\"],[121503779898,\"22,900\",\"\",\"\",\"\",\"\"],[121503784632,\"42,000\",\"\",\"\",\"\",\"\"],[121503793807,\"23,000\",\"\",\"\",\"\",\"\"],[121503808622,\"105,000\",\"\",\"\",\"\",\"\"],[121503831222,\"22,900\",\"\",\"\",\"\",\"\"],[121503831532,\"42,000\",\"\",\"\",\"\",\"\"],[121503844563,\"137,000\",\"\",\"\",\"\",\"\"],[121503850962,\"62,000\",\"\",\"\",\"\",\"\"],[121503861409,\"62,000\",\"\",\"\",\"\",\"\"],[121503906988,\"47,000\",\"\",\"\",\"\",\"\"],[121503915384,\"66,900\",\"\",\"\",\"\",\"\"],[121503922296,\"26,000\",\"\",\"\",\"\",\"\"],[121503927389,\"46,900\",\"\",\"\",\"\",\"\"],[121603011506,\"66,900\",\"\",\"\",\"\",\"\"],[121603016884,\"62,000\",\"\",\"\",\"\",\"\"],[121603023060,\"62,000\",\"\",\"\",\"\",\"\"],[121603023185,\"26,900\",\"\",\"\",\"\",\"\"],[121603060016,\"62,000\",\"\",\"\",\"\",\"\"],[121603092936,\"62,000\",\"\",\"\",\"\",\"\"],[121603105586,\"22,900\",\"\",\"\",\"\",\"\"],[121603107238,\"32,000\",\"\",\"\",\"\",\"\"],[121603153811,\"46,900\",\"\",\"\",\"\",\"\"],[121603162147,\"32,000\",\"\",\"\",\"\",\"\"],[121603163207,\"73,000\",\"\",\"\",\"\",\"\"],[121603179925,\"22,000\",\"\",\"\",\"\",\"\"],[121603211337,\"41,000\",\"\",\"\",\"\",\"\"],[121603221820,\"76,900\",\"\",\"\",\"\",\"\"],[121603229424,\"57,900\",\"\",\"\",\"\",\"\"],[121603231881,\"62,000\",\"\",\"\",\"\",\"\"],[121603280054,\"36,000\",\"\",\"\",\"\",\"\"],[121603294020,\"62,000\",\"\",\"\",\"\",\"\"],[121603294260,\"125,000\",\"\",\"\",\"\",\"\"],[121603319639,\"62,000\",\"\",\"\",\"\",\"\"],[121603327957,\"52,000\",\"\",\"\",\"\",\"\"],[121603333082,\"238,900\",\"\",\"\",\"\",\"\"],[121603340824,\"46,900\",\"\",\"\",\"\",\"\"],[121603352148,\"46,000\",\"\",\"\",\"\",\"\"],[121603354605,\"62,000\",\"\",\"\",\"\",\"\"],[121603374566,\"36,000\",\"\",\"\",\"\",\"\"],[121603376810,\"62,000\",\"\",\"\",\"\",\"\"],[121603376944,\"106,000\",\"\",\"\",\"\",\"\"],[121603379695,\"22,900\",\"\",\"\",\"\",\"\"],[121603383324,\"117,000\",\"\",\"\",\"\",\"\"],[121603396443,\"46,000\",\"\",\"\",\"\",\"\"],[121603402294,\"66,900\",\"\",\"\",\"\",\"\"],[121603428353,\"66,900\",\"\",\"\",\"\",\"\"],[121603432329,\"26,000\",\"\",\"\",\"\",\"\"],[121603432356,\"32,000\",\"\",\"\",\"\",\"\"],[121603453191,\"135,000\",\"\",\"\",\"\",\"\"],[121603458415,\"62,000\",\"\",\"\",\"\",\"\"],[121603492190,\"22,900\",\"\",\"\",\"\",\"\"],[121603528361,\"62,000\",\"\",\"\",\"\",\"\"],[121603536388,\"29,000\",\"\",\"\",\"\",\"\"],[121603542680,\"22,900\",\"\",\"\",\"\",\"\"],[121603556744,\"56,000\",\"\",\"\",\"\",\"\"],[121603569890,\"145,000\",\"\",\"\",\"\",\"\"],[121603603529,\"62,000\",\"\",\"\",\"\",\"\"],[121603606085,\"126,800\",\"\",\"\",\"\",\"\"],[121603613270,\"45,000\",\"\",\"\",\"\",\"\"],[121603618521,\"66,900\",\"\",\"\",\"\",\"\"],[121603622533,\"117,000\",\"\",\"\",\"\",\"\"],[121603637164,\"62,000\",\"\",\"\",\"\",\"\"],[121603638075,\"26,000\",\"\",\"\",\"\",\"\"],[121603648179,\"116,000\",\"\",\"\",\"\",\"\"],[121603665501,\"29,000\",\"\",\"\",\"\",\"\"],[121603673449,\"82,000\",\"\",\"\",\"\",\"\"],[121603680412,\"62,000\",\"\",\"\",\"\",\"\"],[121603681970,\"46,000\",\"\",\"\",\"\",\"\"],[121603698767,\"32,000\",\"\",\"\",\"\",\"\"],[121603712225,\"41,000\",\"\",\"\",\"\",\"\"],[121603745940,\"29,000\",\"\",\"\",\"\",\"\"],[121603758281,\"30,000\",\"\",\"\",\"\",\"\"],[121603792966,\"66,900\",\"\",\"\",\"\",\"\"],[121603815276,\"66,000\",\"\",\"\",\"\",\"\"],[121603820807,\"36,000\",\"\",\"\",\"\",\"\"],[121603834077,\"66,900\",\"\",\"\",\"\",\"\"],[121603838082,\"66,900\",\"\",\"\",\"\",\"\"],[121603867251,\"30,000\",\"\",\"\",\"\",\"\"],[121603876888,\"26,900\",\"\",\"\",\"\",\"\"],[121603892390,\"75,000\",\"\",\"\",\"\",\"\"],[121603916830,\"117,000\",\"\",\"\",\"\",\"\"],[121603952799,\"62,000\",\"\",\"\",\"\",\"\"],[121603953390,\"41,000\",\"\",\"\",\"\",\"\"],[121603961858,\"20,000\",\"\",\"\",\"\",\"\"],[121603985025,\"35,000\",\"\",\"\",\"\",\"\"],[121603985867,\"62,000\",\"\",\"\",\"\",\"\"],[121703001029,\"66,900\",\"\",\"\",\"\",\"\"],[121703005511,\"26,000\",\"\",\"\",\"\",\"\"],[121703014786,\"67,000\",\"\",\"\",\"\",\"\"],[121703020927,\"146,800\",\"\",\"\",\"\",\"\"],[121703021069,\"41,000\",\"\",\"\",\"\",\"\"],[121703035451,\"26,000\",\"\",\"\",\"\",\"\"],[121703040134,\"46,000\",\"\",\"\",\"\",\"\"],[121703060749,\"62,000\",\"\",\"\",\"\",\"\"],[121703071222,\"62,000\",\"\",\"\",\"\",\"\"],[121703077961,\"62,000\",\"\",\"\",\"\",\"\"],[121703081618,\"62,000\",\"\",\"\",\"\",\"\"],[121703097105,\"19,000\",\"\",\"\",\"\",\"\"],[121703106157,\"47,000\",\"\",\"\",\"\",\"\"],[121703115793,\"38,800\",\"\",\"\",\"\",\"\"],[121703150787,\"16,900\",\"\",\"\",\"\",\"\"],[121703156000,\"25,000\",\"\",\"\",\"\",\"\"],[121703160809,\"26,000\",\"\",\"\",\"\",\"\"],[121703176730,\"62,000\",\"\",\"\",\"\",\"\"],[121703200921,\"76,000\",\"\",\"\",\"\",\"\"],[121703200976,\"117,000\",\"\",\"\",\"\",\"\"],[121703216199,\"26,000\",\"\",\"\",\"\",\"\"],[121703231417,\"46,900\",\"\",\"\",\"\",\"\"],[121703245623,\"72,000\",\"\",\"\",\"\",\"\"],[121703254180,\"66,900\",\"\",\"\",\"\",\"\"],[121703285658,\"19,000\",\"\",\"\",\"\",\"\"],[121703297316,\"37,000\",\"\",\"\",\"\",\"\"],[121703301017,\"76,900\",\"\",\"\",\"\",\"\"],[121703304254,\"36,900\",\"\",\"\",\"\",\"\"],[121703316037,\"22,900\",\"\",\"\",\"\",\"\"],[121703349831,\"62,000\",\"\",\"\",\"\",\"\"],[121703351632,\"22,000\",\"\",\"\",\"\",\"\"],[121703354790,\"46,000\",\"\",\"\",\"\",\"\"],[121703377630,\"62,000\",\"\",\"\",\"\",\"\"],[121703408879,\"66,900\",\"\",\"\",\"\",\"\"],[121703420048,\"22,900\",\"\",\"\",\"\",\"\"],[121703434403,\"32,000\",\"\",\"\",\"\",\"\"],[121703435891,\"56,900\",\"\",\"\",\"\",\"\"],[121703492416,\"85,000\",\"\",\"\",\"\",\"\"],[121703497536,\"62,000\",\"\",\"\",\"\",\"\"],[121703504483,\"20,000\",\"\",\"\",\"\",\"\"],[121703519421,\"26,000\",\"\",\"\",\"\",\"\"],[121703526412,\"46,900\",\"\",\"\",\"\",\"\"],[121703535650,\"106,000\",\"\",\"\",\"\",\"\"],[121703553832,\"22,900\",\"\",\"\",\"\",\"\"],[121703579733,\"22,900\",\"\",\"\",\"\",\"\"],[121703579797,\"62,000\",\"\",\"\",\"\",\"\"],[121703583471,\"16,900\",\"\",\"\",\"\",\"\"],[121703586335,\"22,900\",\"\",\"\",\"\",\"\"],[121703587909,\"26,000\",\"\",\"\",\"\",\"\"],[121703600963,\"56,000\",\"\",\"\",\"\",\"\"],[121703617918,\"46,900\",\"\",\"\",\"\",\"\"],[121703644392,\"22,900\",\"\",\"\",\"\",\"\"],[121703650436,\"112,000\",\"\",\"\",\"\",\"\"],[121703672313,\"41,000\",\"\",\"\",\"\",\"\"],[121703688280,\"62,000\",\"\",\"\",\"\",\"\"],[121703700333,\"76,900\",\"\",\"\",\"\",\"\"],[121703727260,\"100,900\",\"\",\"\",\"\",\"\"],[121703731740,\"106,000\",\"\",\"\",\"\",\"\"],[121703749907,\"62,000\",\"\",\"\",\"\",\"\"],[121703760362,\"22,000\",\"\",\"\",\"\",\"\"],[121703773409,\"46,900\",\"\",\"\",\"\",\"\"],[121703787642,\"26,000\",\"\",\"\",\"\",\"\"],[121703796695,\"66,900\",\"\",\"\",\"\",\"\"],[121703813150,\"32,000\",\"\",\"\",\"\",\"\"],[121703815820,\"82,000\",\"\",\"\",\"\",\"\"],[121703816306,\"66,000\",\"\",\"\",\"\",\"\"],[121703826385,\"62,000\",\"\",\"\",\"\",\"\"],[121703836966,\"26,900\",\"\",\"\",\"\",\"\"],[121703850498,\"46,000\",\"\",\"\",\"\",\"\"],[121703870687,\"62,000\",\"\",\"\",\"\",\"\"],[121703872621,\"123,000\",\"\",\"\",\"\",\"\"],[121703902782,\"73,000\",\"\",\"\",\"\",\"\"],[121703964490,\"26,000\",\"\",\"\",\"\",\"\"],[121703965055,\"62,000\",\"\",\"\",\"\",\"\"],[121703971533,\"145,000\",\"\",\"\",\"\",\"\"],[121703973221,\"137,000\",\"\",\"\",\"\",\"\"],[121703991227,\"29,000\",\"\",\"\",\"\",\"\"],[121703994303,\"145,000\",\"\",\"\",\"\",\"\"],[121703996301,\"26,000\",\"\",\"\",\"\",\"\"],[121803066698,\"62,000\",\"\",\"\",\"\",\"\"],[121803287592,\"72,000\",\"\",\"\",\"\",\"\"],[121803350375,\"37,000\",\"\",\"\",\"\",\"\"],[121803416723,\"82,000\",\"\",\"\",\"\",\"\"],[121803516856,\"117,000\",\"\",\"\",\"\",\"\"],[121803628106,\"76,000\",\"\",\"\",\"\",\"\"],[121803665514,\"30,000\",\"\",\"\",\"\",\"\"],[121803673586,\"72,000\",\"\",\"\",\"\",\"\"],[121803774469,\"62,000\",\"\",\"\",\"\",\"\"],[121803877711,\"72,000\",\"\",\"\",\"\",\"\"],[121803892710,\"62,000\",\"\",\"\",\"\",\"\"],[121903090902,\"32,000\",\"\",\"\",\"\",\"\"],[121903178006,\"20,000\",\"\",\"\",\"\",\"\"],[121903374220,\"29,000\",\"\",\"\",\"\",\"\"],[121903610946,\"31,000\",\"\",\"\",\"\",\"\"],[121903642051,\"55,000\",\"\",\"\",\"\",\"\"],[121903665052,\"56,000\",\"\",\"\",\"\",\"\"],[121903707932,\"32,000\",\"\",\"\",\"\",\"\"],[121903789088,\"66,900\",\"\",\"\",\"\",\"\"],[121903824327,\"30,000\",\"\",\"\",\"\",\"\"],[122003006556,\"46,000\",\"\",\"\",\"\",\"\"],[122003022059,\"26,000\",\"\",\"\",\"\",\"\"],[122003032409,\"41,000\",\"\",\"\",\"\",\"\"],[122003079066,\"45,000\",\"\",\"\",\"\",\"\"],[122003081539,\"22,000\",\"\",\"\",\"\",\"\"],[122003090351,\"17,000\",\"\",\"\",\"\",\"\"],[122003093215,\"42,000\",\"\",\"\",\"\",\"\"],[122003103406,\"106,000\",\"\",\"\",\"\",\"\"],[122003191678,\"126,800\",\"\",\"\",\"\",\"\"],[122003209384,\"26,000\",\"\",\"\",\"\",\"\"],[122003243351,\"62,000\",\"\",\"\",\"\",\"\"],[122003243777,\"32,000\",\"\",\"\",\"\",\"\"],[122003263823,\"46,900\",\"\",\"\",\"\",\"\"],[122003270115,\"29,000\",\"\",\"\",\"\",\"\"],[122003273565,\"7,000\",\"\",\"\",\"\",\"\"],[122003319034,\"22,900\",\"\",\"\",\"\",\"\"],[122003332211,\"62,000\",\"\",\"\",\"\",\"\"],[122003360995,\"62,000\",\"\",\"\",\"\",\"\"],[122003375784,\"31,000\",\"\",\"\",\"\",\"\"],[122003406127,\"62,000\",\"\",\"\",\"\",\"\"],[122003413349,\"255,800\",\"\",\"\",\"\",\"\"],[122003422727,\"31,000\",\"\",\"\",\"\",\"\"],[122003488088,\"31,000\",\"\",\"\",\"\",\"\"],[122003489227,\"76,900\",\"\",\"\",\"\",\"\"],[122003497509,\"26,000\",\"\",\"\",\"\",\"\"],[122003497846,\"91,900\",\"\",\"\",\"\",\"\"],[122003503077,\"62,000\",\"\",\"\",\"\",\"\"],[122003508577,\"45,900\",\"\",\"\",\"\",\"\"],[122003540661,\"46,000\",\"\",\"\",\"\",\"\"],[122003562131,\"30,000\",\"\",\"\",\"\",\"\"],[122003564120,\"30,000\",\"\",\"\",\"\",\"\"],[122003574978,\"176,000\",\"\",\"\",\"\",\"\"],[122003581215,\"56,000\",\"\",\"\",\"\",\"\"],[122003584656,\"124,000\",\"\",\"\",\"\",\"\"],[122003593520,\"31,000\",\"\",\"\",\"\",\"\"],[122003635774,\"66,000\",\"\",\"\",\"\",\"\"],[122003637912,\"66,900\",\"\",\"\",\"\",\"\"],[122003645878,\"52,000\",\"\",\"\",\"\",\"\"],[122003648741,\"66,900\",\"\",\"\",\"\",\"\"],[122003681667,\"46,000\",\"\",\"\",\"\",\"\"],[122003690683,\"26,000\",\"\",\"\",\"\",\"\"],[122003697473,\"30,000\",\"\",\"\",\"\",\"\"],[122003719191,\"31,000\",\"\",\"\",\"\",\"\"],[122003721451,\"176,000\",\"\",\"\",\"\",\"\"],[122003738196,\"62,000\",\"\",\"\",\"\",\"\"],[122003746353,\"26,900\",\"\",\"\",\"\",\"\"],[122003749314,\"66,900\",\"\",\"\",\"\",\"\"],[122003756183,\"62,000\",\"\",\"\",\"\",\"\"],[122003758419,\"46,900\",\"\",\"\",\"\",\"\"],[122003771571,\"62,000\",\"\",\"\",\"\",\"\"],[122003775133,\"22,900\",\"\",\"\",\"\",\"\"],[122003778626,\"82,000\",\"\",\"\",\"\",\"\"],[122003795410,\"22,000\",\"\",\"\",\"\",\"\"],[122003804523,\"22,900\",\"\",\"\",\"\",\"\"],[122003812319,\"30,000\",\"\",\"\",\"\",\"\"],[122003814131,\"66,900\",\"\",\"\",\"\",\"\"],[122003823218,\"31,000\",\"\",\"\",\"\",\"\"],[122003837859,\"22,900\",\"\",\"\",\"\",\"\"],[122003849164,\"66,900\",\"\",\"\",\"\",\"\"],[122003860228,\"37,000\",\"\",\"\",\"\",\"\"],[122003870146,\"66,000\",\"\",\"\",\"\",\"\"],[122003879192,\"36,000\",\"\",\"\",\"\",\"\"],[122003887191,\"22,000\",\"\",\"\",\"\",\"\"],[122003889047,\"100,000\",\"\",\"\",\"\",\"\"],[122003910958,\"30,000\",\"\",\"\",\"\",\"\"],[122003913432,\"46,900\",\"\",\"\",\"\",\"\"],[122003922838,\"45,000\",\"\",\"\",\"\",\"\"],[122003925996,\"46,000\",\"\",\"\",\"\",\"\"],[122003940560,\"86,000\",\"\",\"\",\"\",\"\"],[122003951973,\"46,900\",\"\",\"\",\"\",\"\"],[122003962049,\"32,000\",\"\",\"\",\"\",\"\"],[122003962757,\"66,900\",\"\",\"\",\"\",\"\"],[122003964117,\"66,900\",\"\",\"\",\"\",\"\"],[122003965435,\"22,900\",\"\",\"\",\"\",\"\"],[122003965462,\"76,900\",\"\",\"\",\"\",\"\"],[122003973771,\"62,000\",\"\",\"\",\"\",\"\"],[122003975399,\"66,000\",\"\",\"\",\"\",\"\"],[122003992138,\"26,900\",\"\",\"\",\"\",\"\"],[122003997285,\"106,000\",\"\",\"\",\"\",\"\"],[122003998901,\"16,900\",\"\",\"\",\"\",\"\"],[122103197411,\"31,000\",\"\",\"\",\"\",\"\"],[122103279201,\"55,000\",\"\",\"\",\"\",\"\"],[122103336348,\"62,000\",\"\",\"\",\"\",\"\"],[122103391187,\"62,000\",\"\",\"\",\"\",\"\"],[122103548031,\"29,000\",\"\",\"\",\"\",\"\"],[122103583760,\"22,900\",\"\",\"\",\"\",\"\"],[122103649020,\"66,900\",\"\",\"\",\"\",\"\"],[122103695603,\"85,000\",\"\",\"\",\"\",\"\"],[122103814068,\"73,000\",\"\",\"\",\"\",\"\"],[122103828849,\"86,000\",\"\",\"\",\"\",\"\"],[122103927937,\"66,000\",\"\",\"\",\"\",\"\"],[122103936236,\"26,000\",\"\",\"\",\"\",\"\"],[122203063689,\"62,000\",\"\",\"\",\"\",\"\"],[122203170387,\"26,000\",\"\",\"\",\"\",\"\"],[122203193546,\"26,000\",\"\",\"\",\"\",\"\"],[122203274674,\"170,000\",\"\",\"\",\"\",\"\"],[122203321398,\"95,000\",\"\",\"\",\"\",\"\"],[122203446059,\"47,000\",\"\",\"\",\"\",\"\"],[122203455367,\"66,900\",\"\",\"\",\"\",\"\"],[122203571063,\"41,000\",\"\",\"\",\"\",\"\"],[122203708162,\"100,000\",\"\",\"\",\"\",\"\"],[122203751270,\"85,000\",\"\",\"\",\"\",\"\"],[122203759528,\"31,000\",\"\",\"\",\"\",\"\"],[122203782289,\"66,900\",\"\",\"\",\"\",\"\"],[122303002940,\"51,000\",\"\",\"\",\"\",\"\"],[122303005239,\"81,900\",\"\",\"\",\"\",\"\"],[122303007820,\"31,000\",\"\",\"\",\"\",\"\"],[122303009925,\"22,900\",\"\",\"\",\"\",\"\"],[122303010976,\"62,000\",\"\",\"\",\"\",\"\"],[122303013292,\"31,000\",\"\",\"\",\"\",\"\"],[122303017535,\"41,000\",\"\",\"\",\"\",\"\"],[122303020432,\"62,000\",\"\",\"\",\"\",\"\"],[122303021680,\"46,000\",\"\",\"\",\"\",\"\"],[122303037043,\"41,000\",\"\",\"\",\"\",\"\"],[122303038468,\"38,000\",\"\",\"\",\"\",\"\"],[122303043017,\"55,000\",\"\",\"\",\"\",\"\"],[122303050646,\"66,000\",\"\",\"\",\"\",\"\"],[122303051973,\"28,000\",\"\",\"\",\"\",\"\"],[122303054314,\"36,900\",\"\",\"\",\"\",\"\"],[122303055058,\"38,800\",\"\",\"\",\"\",\"\"],[122303067831,\"76,900\",\"\",\"\",\"\",\"\"],[122303074619,\"46,000\",\"\",\"\",\"\",\"\"],[122303083404,\"62,000\",\"\",\"\",\"\",\"\"],[122303088339,\"62,000\",\"\",\"\",\"\",\"\"],[122303090033,\"62,000\",\"\",\"\",\"\",\"\"],[122303108615,\"62,000\",\"\",\"\",\"\",\"\"],[122303109447,\"62,000\",\"\",\"\",\"\",\"\"],[122303114917,\"66,900\",\"\",\"\",\"\",\"\"],[122303121005,\"123,000\",\"\",\"\",\"\",\"\"],[122303128460,\"75,000\",\"\",\"\",\"\",\"\"],[122303133268,\"145,000\",\"\",\"\",\"\",\"\"],[122303149065,\"46,900\",\"\",\"\",\"\",\"\"],[122303152218,\"146,800\",\"\",\"\",\"\",\"\"],[122303170375,\"62,000\",\"\",\"\",\"\",\"\"],[122303170959,\"54,700\",\"\",\"\",\"\",\"\"],[122303181858,\"56,000\",\"\",\"\",\"\",\"\"],[122303184624,\"30,000\",\"\",\"\",\"\",\"\"],[122303188392,\"47,000\",\"\",\"\",\"\",\"\"],[122303203284,\"31,000\",\"\",\"\",\"\",\"\"],[122303205112,\"66,000\",\"\",\"\",\"\",\"\"],[122303209482,\"51,000\",\"\",\"\",\"\",\"\"],[122303212079,\"66,900\",\"\",\"\",\"\",\"\"],[122303216862,\"32,000\",\"\",\"\",\"\",\"\"],[122303219072,\"22,900\",\"\",\"\",\"\",\"\"],[122303225028,\"22,900\",\"\",\"\",\"\",\"\"],[122303228371,\"22,900\",\"\",\"\",\"\",\"\"],[122303229884,\"66,000\",\"\",\"\",\"\",\"\"],[122303254039,\"62,000\",\"\",\"\",\"\",\"\"],[122303293931,\"20,000\",\"\",\"\",\"\",\"\"],[122303297405,\"33,000\",\"\",\"\",\"\",\"\"],[122303300037,\"62,000\",\"\",\"\",\"\",\"\"],[122303310025,\"26,000\",\"\",\"\",\"\",\"\"],[122303320332,\"42,000\",\"\",\"\",\"\",\"\"],[122303337837,\"17,000\",\"\",\"\",\"\",\"\"],[122303340895,\"62,000\",\"\",\"\",\"\",\"\"],[122303342389,\"72,000\",\"\",\"\",\"\",\"\"],[122303344882,\"101,000\",\"\",\"\",\"\",\"\"],[122303348763,\"22,900\",\"\",\"\",\"\",\"\"],[122303349498,\"20,000\",\"\",\"\",\"\",\"\"],[122303351095,\"22,900\",\"\",\"\",\"\",\"\"],[122303356957,\"38,800\",\"\",\"\",\"\",\"\"],[122303362693,\"22,900\",\"\",\"\",\"\",\"\"],[122303368934,\"82,000\",\"\",\"\",\"\",\"\"],[122303379602,\"186,800\",\"\",\"\",\"\",\"\"],[122303384233,\"30,000\",\"\",\"\",\"\",\"\"],[122303387346,\"145,000\",\"\",\"\",\"\",\"\"],[122303388178,\"41,000\",\"\",\"\",\"\",\"\"],[122303388813,\"62,000\",\"\",\"\",\"\",\"\"],[122303391400,\"22,900\",\"\",\"\",\"\",\"\"],[122303397468,\"66,000\",\"\",\"\",\"\",\"\"],[122303401789,\"32,000\",\"\",\"\",\"\",\"\"],[122303401886,\"22,000\",\"\",\"\",\"\",\"\"],[122303404430,\"20,000\",\"\",\"\",\"\",\"\"],[122303409611,\"126,800\",\"\",\"\",\"\",\"\"],[122303409639,\"32,000\",\"\",\"\",\"\",\"\"],[122303411306,\"62,000\",\"\",\"\",\"\",\"\"],[122303412369,\"31,000\",\"\",\"\",\"\",\"\"],[122303413410,\"106,000\",\"\",\"\",\"\",\"\"],[122303415083,\"75,000\",\"\",\"\",\"\",\"\"],[122303418239,\"66,000\",\"\",\"\",\"\",\"\"],[122303421923,\"20,000\",\"\",\"\",\"\",\"\"],[122303424531,\"62,000\",\"\",\"\",\"\",\"\"],[122303428546,\"51,000\",\"\",\"\",\"\",\"\"],[122303431407,\"66,900\",\"\",\"\",\"\",\"\"],[122303431878,\"22,000\",\"\",\"\",\"\",\"\"],[122303435078,\"26,000\",\"\",\"\",\"\",\"\"],[122303438233,\"66,900\",\"\",\"\",\"\",\"\"],[122303441680,\"26,000\",\"\",\"\",\"\",\"\"],[122303447693,\"226,400\",\"\",\"\",\"\",\"\"],[122303450439,\"31,000\",\"\",\"\",\"\",\"\"],[122303462869,\"30,000\",\"\",\"\",\"\",\"\"],[122303468322,\"26,900\",\"\",\"\",\"\",\"\"],[122303480564,\"41,900\",\"\",\"\",\"\",\"\"],[122303483482,\"62,000\",\"\",\"\",\"\",\"\"],[122303485365,\"126,800\",\"\",\"\",\"\",\"\"],[122303485408,\"32,000\",\"\",\"\",\"\",\"\"],[122303489486,\"51,000\",\"\",\"\",\"\",\"\"],[122303497254,\"26,000\",\"\",\"\",\"\",\"\"],[122303501539,\"26,000\",\"\",\"\",\"\",\"\"],[122303502088,\"22,000\",\"\",\"\",\"\",\"\"],[122303505711,\"82,000\",\"\",\"\",\"\",\"\"],[122303512818,\"26,900\",\"\",\"\",\"\",\"\"],[122303518104,\"62,000\",\"\",\"\",\"\",\"\"],[122303534908,\"62,000\",\"\",\"\",\"\",\"\"],[122303544747,\"176,000\",\"\",\"\",\"\",\"\"],[122303547072,\"41,000\",\"\",\"\",\"\",\"\"],[122303555521,\"46,000\",\"\",\"\",\"\",\"\"],[122303556672,\"26,000\",\"\",\"\",\"\",\"\"],[122303564981,\"21,000\",\"\",\"\",\"\",\"\"],[122303568932,\"106,000\",\"\",\"\",\"\",\"\"],[122303578090,\"62,000\",\"\",\"\",\"\",\"\"],[122303581809,\"46,900\",\"\",\"\",\"\",\"\"],[122303582570,\"22,900\",\"\",\"\",\"\",\"\"],[122303587238,\"66,000\",\"\",\"\",\"\",\"\"],[122303587557,\"20,000\",\"\",\"\",\"\",\"\"],[122303592249,\"62,000\",\"\",\"\",\"\",\"\"],[122303594201,\"22,000\",\"\",\"\",\"\",\"\"],[122303594609,\"62,000\",\"\",\"\",\"\",\"\"],[122303594654,\"46,000\",\"\",\"\",\"\",\"\"],[122303605668,\"62,000\",\"\",\"\",\"\",\"\"],[122303609433,\"76,900\",\"\",\"\",\"\",\"\"],[122303613144,\"22,900\",\"\",\"\",\"\",\"\"],[122303621222,\"55,000\",\"\",\"\",\"\",\"\"],[122303658013,\"22,900\",\"\",\"\",\"\",\"\"],[122303670459,\"51,000\",\"\",\"\",\"\",\"\"],[122303674172,\"22,900\",\"\",\"\",\"\",\"\"],[122303676222,\"62,000\",\"\",\"\",\"\",\"\"],[122303688193,\"176,000\",\"\",\"\",\"\",\"\"],[122303694671,\"101,000\",\"\",\"\",\"\",\"\"],[122303694981,\"76,900\",\"\",\"\",\"\",\"\"],[122303698880,\"106,000\",\"\",\"\",\"\",\"\"],[122303709520,\"145,000\",\"\",\"\",\"\",\"\"],[122303729065,\"46,000\",\"\",\"\",\"\",\"\"],[122303742543,\"46,900\",\"\",\"\",\"\",\"\"],[122303755316,\"41,000\",\"\",\"\",\"\",\"\"],[122303765155,\"22,900\",\"\",\"\",\"\",\"\"],[122303776744,\"62,000\",\"\",\"\",\"\",\"\"],[122303784673,\"62,000\",\"\",\"\",\"\",\"\"],[122303791406,\"32,000\",\"\",\"\",\"\",\"\"],[122303793307,\"22,900\",\"\",\"\",\"\",\"\"],[122303799620,\"106,000\",\"\",\"\",\"\",\"\"],[122303803765,\"51,900\",\"\",\"\",\"\",\"\"],[122303803853,\"46,900\",\"\",\"\",\"\",\"\"],[122303807327,\"143,900\",\"\",\"\",\"\",\"\"],[122303811843,\"62,000\",\"\",\"\",\"\",\"\"],[122303817014,\"135,000\",\"\",\"\",\"\",\"\"],[122303829532,\"66,900\",\"\",\"\",\"\",\"\"],[122303830741,\"52,000\",\"\",\"\",\"\",\"\"],[122303834914,\"22,900\",\"\",\"\",\"\",\"\"],[122303843198,\"62,000\",\"\",\"\",\"\",\"\"],[122303855342,\"66,000\",\"\",\"\",\"\",\"\"],[122303861617,\"26,000\",\"\",\"\",\"\",\"\"],[122303879607,\"66,000\",\"\",\"\",\"\",\"\"],[122303889792,\"76,900\",\"\",\"\",\"\",\"\"],[122303896011,\"55,000\",\"\",\"\",\"\",\"\"],[122303901289,\"62,000\",\"\",\"\",\"\",\"\"],[122303904082,\"26,000\",\"\",\"\",\"\",\"\"],[122303911170,\"22,900\",\"\",\"\",\"\",\"\"],[122303915592,\"126,700\",\"\",\"\",\"\",\"\"],[122303916096,\"66,900\",\"\",\"\",\"\",\"\"],[122303928091,\"66,900\",\"\",\"\",\"\",\"\"],[122303934092,\"117,000\",\"\",\"\",\"\",\"\"],[122303956818,\"145,000\",\"\",\"\",\"\",\"\"],[122303965597,\"72,000\",\"\",\"\",\"\",\"\"],[122303970793,\"31,000\",\"\",\"\",\"\",\"\"],[122303974841,\"51,000\",\"\",\"\",\"\",\"\"],[122303976256,\"20,000\",\"\",\"\",\"\",\"\"],[122303991583,\"26,000\",\"\",\"\",\"\",\"\"],[122303995950,\"76,900\",\"\",\"\",\"\",\"\"],[122303999682,\"62,000\",\"\",\"\",\"\",\"\"],[122403057196,\"46,000\",\"\",\"\",\"\",\"\"],[122403146180,\"86,000\",\"\",\"\",\"\",\"\"],[122403146481,\"62,000\",\"\",\"\",\"\",\"\"],[122403155832,\"26,000\",\"\",\"\",\"\",\"\"],[122403276010,\"26,000\",\"\",\"\",\"\",\"\"],[122403280156,\"41,000\",\"\",\"\",\"\",\"\"],[122403652830,\"70,600\",\"\",\"\",\"\",\"\"],[122403701932,\"62,000\",\"\",\"\",\"\",\"\"],[122403795791,\"62,000\",\"\",\"\",\"\",\"\"],[122403937838,\"32,000\",\"\",\"\",\"\",\"\"]]";
				$this->write_log("/n ********** /n");
				$this->write_log($data);

				$data = (String) $_REQUEST['data'];
				$data = json_decode($data);

				if ($data === null) {
					$error = json_last_error();

					switch ($error) {
						case JSON_ERROR_NONE:
							$this->write_log('No error has occurred');
							break;
						case JSON_ERROR_DEPTH:
							$this->write_log('The maximum stack depth has been exceeded');
							break;
						case JSON_ERROR_STATE_MISMATCH:
							$this->write_log( 'Invalid or malformed JSON');
							break;
						case JSON_ERROR_CTRL_CHAR:
							$this->write_log( 'Control character error, possibly incorrectly encoded');
							break;
						case JSON_ERROR_SYNTAX:
							$this->write_log('Syntax error');
							break;
						case JSON_ERROR_UTF8:
							$this->write_log('Malformed UTF-8 characters, possibly incorrectly encoded');
							break;
						default:
							$this->write_log( 'Unknown error');
							break;
					}
				}
				else{
					$this->write_log($data);
				}*/

				/*
				 * The data received throw JSON.stringify in javascript add a lot of \ to the sting ,
				 * so if we cant to use json decode without error , we must remove all occurence of it
				 */
				$_REQUEST['data'] = str_replace("\\", "", $_REQUEST['data']);
				$_REQUEST['array_ship'] = str_replace("\\", "", $_REQUEST['array_ship']);
				$data = $this->check_payment_status( json_decode($_REQUEST['data']), json_decode($_REQUEST['array_ship'] ));
			}
			if ( $func == 'check_factured' ) {
				$data = $this->check_payment_status( $_REQUEST['data'], $_REQUEST['array_ship'], 'check_factured' );
			}

			if ( $func == 'show_popup_payment' ) {
				$data = $this->show_popup_payment( $_REQUEST['orders'] );
				echo $data;
				wp_die();
			}
			if ( $func == 'show_popup_factured' ) {
				$data = $this->show_popup_payment( $_REQUEST['orders'], 'show_popup_factured' );
				echo $data;
				wp_die();
			}
			if ( $func == 'save_payment' ) {
				$data = $this->process_save_payment( $_REQUEST['orders'], $_REQUEST['date_paid'] );
			}


			if ( $func == 'save_factured' ) {
				$data = $this->process_save_payment( $_REQUEST['orders'], $_REQUEST['date_paid'], 'save_factured' );
			}

			if ( $func == 'process_load' ) {
				$data = $this->process_load_table_date_company();
			}
			echo json_encode( $data );
			wp_die();
		}
	}

	function validate_transaction() {
		$tr_id = $_REQUEST['item_tr']['id'];
		update_post_meta( $tr_id, 'status_tr', 'completed' );

		return $_REQUEST;
	}

	function get_list_transaction() {
		$args = [
			'post_type'      => 'payment_histroy',
			'posts_per_page' => - 1,
			'post_status'    => 'any',
			'fields'         => 'ids'

		];

		$ids  = get_posts( $args );
		$data = [];
		foreach ( $ids as $tr_id ) {
			array_push( $data, [
				'id'          => $tr_id,
				'date_tr'     => get_post_meta( $tr_id, 'date_tr', true ),
				'num_tr'      => get_post_meta( $tr_id, 'num_tr', true ),
				'factured_tr' => get_post_meta( $tr_id, 'factured_tr', true ),
				'orders_tr'   => get_post_meta( $tr_id, 'orders_tr', true ),
				'total_tr'    => get_post_meta( $tr_id, 'total_tr', true ),
				'status_tr'   => get_post_meta( $tr_id, 'status_tr', true )
			] );
		}

		return [
			'items' => $data,
		];
	}

	function process_upload_file() {

//        $reader = new \PhpOffice\PhpSpreadsheet\Reader\Xlsx();
//$spreadsheet = $reader->load("05featuredemo.xlsx");
		$img = $_FILES["files_data"]["name"];
		$tmp = $_FILES["files_data"]["tmp_name"];

		$upload_dir = wp_upload_dir();
		$path       = $upload_dir['basedir'] . '/wsc_files_orders/sheet';
		if ( ! file_exists( $path ) ) {
			mkdir( $path, 0777, true );
		}

		$final_image = rand( 1000, 1000000 ) . $img;
		$path        = $path . '/' . strtolower( $final_image );

		if ( move_uploaded_file( $tmp, $path ) ) {
			$reader      = new \PhpOffice\PhpSpreadsheet\Reader\Xlsx();
			$spreadsheet = $reader->load( $path );
			$sheetData   = $spreadsheet->getActiveSheet()->toArray();

			//check faturaiton or payment
			$sizeHeader = sizeof( $sheetData[0] );


			unset( $sheetData[0] );
		}

		return [
			'data'       => $sheetData,
			'sizeHeader' => $sizeHeader
		];
	}

	function process_load_table_date_company() {
		$company_load = $_REQUEST['company_load'];

		$data_company = get_page_by_path( $company_load, OBJECT, 'wsc-companies' );

		$date_load = $_REQUEST['date_load'];

		$status_shippment = $_REQUEST['status_shippment'];
		$array_status     = wc_get_order_statuses();
		if ( $status_shippment != 'all' ) {
			$array_status = [ $status_shippment ];
		}
		$date_meta_key = '_order_date_pickup';

		if ( $_REQUEST['filter_date'] == 'completed' ) {
			$date_meta_key = '_order_date_delivred';
		}
		$array_date = explode( 'to', $date_load );
		$date_start = trim( $array_date[0] );
		$date_end   = trim( $array_date[1] );
		if ( $date_end == '' ) {
			$date_end = $date_start;
		}
		$args = array(
			'post_type'      => 'shop_order',
			'posts_per_page' => - 1,
			'post_status'    => $array_status,
			'fields'         => 'ids',
			'meta_query'     => array(
				'relation'  => 'AND',
				array(
					'key'     => '_shipment_company_name',
					'value'   => array( $company_load ),
					'compare' => 'IN',
				),
				array(
					'key'     => $date_meta_key,
					'value'   => array( $date_start, $date_end ),
					'compare' => 'BETWEEN',
					'type'    => 'DATE'
				),
				array(
					'key'     => '_shipment_number_id',
					'value'   => array( '' ),
					'compare' => 'NOT IN',
				),
				'inclusive' => false,
			),
		);
		$data = [];
		$ids  = get_posts( $args );
		foreach ( $ids as $key => $order_id ) {
			$order       = wc_get_order( (int) $order_id );
			$columnprice = str_replace( '.000', '', $order->get_total() );
			if ( $_REQUEST['is_factured'] == 'true' ) {
				$columnprice = get_post_meta( $data_company->ID, 'wsc_company_shipping_cost', true );

			}

			$data[] = [ get_post_meta( $order_id, '_shipment_number_id', true ), $columnprice ];

		}

		return [
			'data'        => $data,
			'found_order' => count( $data ),
			'debug'       => $_REQUEST
		];
	}

	function process_save_payment( $orders, $date_paid, $save_factured = '' ) {
		if ( $date_paid != '' ) {

			$array_orders = explode( ',', $orders );
			$total        = 0;
			foreach ( $array_orders as $order_id ) {
				$order = wc_get_order( (int) $order_id );
				if ( $order ) {
					if ( $save_factured == 'save_factured' ) {
						update_post_meta( $order->get_id(), '_order_company_factured', 'factured' );
						update_post_meta( $order->get_id(), '_shippment_date_factured', $date_paid );
					} else {
						$order->update_status( 'paiement-recu' );
						update_post_meta( $order->get_id(), '_order_date_paid', $date_paid );

					}

					$total += $order->get_total();

				}
			}

			if ( $save_factured == 'save_factured' ) {

			} else {
				$tr_id = wp_insert_post( [
					'post_status' => "publish", // (Draft | Pending | Publish)
					'post_title'  => 'Transaction' . $_REQUEST['num_tr'],
					'post_type'   => "payment_histroy"
				] );

				update_post_meta( $tr_id, 'date_tr', $date_paid );
				update_post_meta( $tr_id, 'num_tr', $_REQUEST['num_tr'] );
				update_post_meta( $tr_id, 'factured_tr', $save_factured );
				update_post_meta( $tr_id, 'orders_tr', $array_orders );
				update_post_meta( $tr_id, 'total_tr', $total );
			}


			return [
				'debug' => $_REQUEST,
				'type'  => 'success',
			];
		} else {
			return [
				'type' => 'error',
				'msg'  => '<i class="dashicons dashicons-no"></i> Choisir une date svp!'
			];
		}

	}

	function show_popup_payment( $orders, $show_popup = '' ) {
		$html         = '';
		$array_orders = explode( ',', $orders );

		ob_start();
		include 'partials/payment/show_popup_payment.php';
		$html .= ob_get_clean();

		return $html;

	}

	function check_payment_status( $data, $array_ship, $check_factured = '' ) {

		$highlighted         = [];
		$remove_row          = [];
		$array_success_order = [];
		$array_success_key   = [];

		$array_status = [ 'paiement-recu' ];

		$array_duplicate = array_count_values( (array) $array_ship );
		$args            = array(
			'post_type'      => 'shop_order',
			'posts_per_page' => - 1,
			'post_status'    => wc_get_order_statuses(),
			'fields'         => 'ids',

		);
		$total           = 0;
		foreach ( $data as $key => $d ) {
			$ship_number = $d[0];
			$order_price = $d[1];
			$order_price = str_replace( ',', '.', $order_price );
			$total       += floatval( $order_price );
			$res         = '';
			if ( $ship_number != '' ) {

				$args['meta_query'] = array(
					array(
						'key'     => '_shipment_number_id',
						'value'   => [ $ship_number ],
						'compare' => 'IN',
					),
				);
				$ids                = get_posts( $args );

				if ( $ids[0] && $ids[0] != null && $ids[0] != '' ) {


					$order_id = $ids[0];
					$order    = wc_get_order( (int) $order_id );

					$res                    .= 'Trouvé ';
					$highlighted['found'][] = $key + 1;
					$order_found            = '1';

					$data[ $key ][2] = $order_id;
					$date_filter     = '';
					if ( $order->get_status() == 'completed' ) {
						$date_filter = ' le ' . get_post_meta( $order->get_id(), '_order_date_delivred', true );
					}
					if ( $order->get_status() == 'pick-up' ) {
						$date_filter = ' le ' . get_post_meta( $order->get_id(), '_order_date_pickup', true );
					}
					$data[ $key ][3] = wc_get_order_status_name( $order->get_status() ) . $date_filter;

					if ( $check_factured != 'check_factured' ) {

						if ( str_replace( '.000', '', $order->get_total() ) != $order_price ) {
							$res                              .= ' Prix incorrect';
							$highlighted['incorrect_price'][] = $key + 1;
							$order_found                      = '0';
						}

						if ( in_array( $order->get_status(), $array_status ) ) {
							$highlighted['incorrect_status'][] = $key + 1;
							$res                               .= ' Paiement déja reçu';
							$order_found                       = '0';
						}
					}
					if ( $array_duplicate[ $ship_number ] > 1 ) {
						$data[ $key ][4]            = 'OUI (' . $array_duplicate[ $ship_number ] . ')';
						$highlighted['duplicate'][] = $key + 1;
						$res                        .= ' Dubliquée';
						$order_found                = '0';

					} else {
						$data[ $key ][4] = 'NON';

					}
					if ( $check_factured == 'check_factured' ) {
						$is_factured = get_post_meta( $order->get_id(), '_order_company_factured', true );
						if ( $is_factured != '' && $is_factured == 'factured' ) {
							$highlighted['factured'][] = $key + 1;
							$res                       .= ' Déja Facturé';
							$order_found               = '0';
						}
					}
					if ( $order_found == '1' ) {
						$array_success_order[] = $order_id;
						$array_success_key[]   = $key;
					}

					//$data[$key][5] = get_label_ship_company(get_post_meta($order->get_id(),'_shipment_company_name',true));

				} else {
					$data[ $key ][2]            = '';
					$data[ $key ][3]            = '';
					$res                        .= 'Commande n\'existe pas!';
					$highlighted['not_found'][] = $key + 1;

				}


				$data[ $key ][5] = $res;


			} else {
				$remove_row[] = $key + 1;
			}
		}

		return
			[
				'data'                => $data,
				'highlighted'         => $highlighted,
				'removerow'           => $remove_row,
				'array_success_order' => $array_success_order,
				'array_success_key'   => $array_success_key,
				'total'               => $total,
				'debug'               => $array_duplicate
			];
	}

	function write_log ( $log )  {
		if ( is_array( $log ) || is_object( $log ) ) {
			error_log( print_r( $log, true ) );
		} else {
			error_log( $log );
		}
	}

	public function detectDelimiter( $csvFile ) {
		$delimiters = array(
			';'  => 0,
			','  => 0,
			"\t" => 0,
			"|"  => 0
		);

		$handle    = fopen( $csvFile, "r" );
		$firstLine = fgets( $handle );
		fclose( $handle );
		foreach ( $delimiters as $delimiter => &$count ) {
			$count = count( str_getcsv( $firstLine, $delimiter ) );
		}

		return array_search( max( $delimiters ), $delimiters );
	}
}
